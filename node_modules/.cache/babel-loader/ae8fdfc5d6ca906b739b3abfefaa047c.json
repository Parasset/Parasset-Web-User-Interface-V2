{"ast":null,"code":"var _jsxFileName = \"/Users/miczero/ParaAsset/src/views/Boardroom/Boardroom.tsx\";\nimport React, { useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useTranslation } from 'react-i18next';\nimport { useWallet } from 'use-wallet';\nimport useIsMobile from '../../hooks/useIsMobile';\nimport Button from '../../components/Button';\nimport PageHeader from '../../components/PageHeader';\nimport Spacer from '../../components/Spacer';\nimport Harvest from './components/Harvest';\nimport Stake from './components/Stake';\nimport { Switch } from 'react-router-dom';\nimport Page from '../../components/Page';\nimport useRedeemOnBoardroom from '../../hooks/useRedeemOnBoardroom';\nimport useStakedBalanceOnBoardroom from '../../hooks/useStakedBalanceOnBoardroom';\nimport join from '../../assets/img/join.png';\nimport price from '../../assets/img/price.png';\nimport arrow from '../../assets/img/arrow.png';\nimport wallet from '../../assets/img/wallet.png';\nimport config from '../../config';\nimport LaunchCountdown from '../../components/LaunchCountdown';\nimport Stat from './components/Stat';\nimport ProgressCountdown from './components/ProgressCountdown';\nimport useCashPriceInEstimatedTWAP from '../../hooks/useCashPriceInEstimatedTWAP';\nimport useTreasuryAmount from '../../hooks/useTreasuryAmount';\nimport Humanize from 'humanize-plus';\nimport { getBalance } from '../../utils/formatBalance';\nimport useTreasuryAllocationTimes from '../../hooks/useTreasuryAllocationTimes';\nimport Notice from '../../components/Notice';\nimport useBoardroomVersion from '../../hooks/useBoardroomVersion';\nimport moment from 'moment';\n\nconst Boardroom = () => {\n  // useEffect(() => window.scrollTo(0, 0));\n  const {\n    t\n  } = useTranslation();\n  const {\n    account\n  } = useWallet();\n  const {\n    onRedeem\n  } = useRedeemOnBoardroom();\n  const stakedBalance = useStakedBalanceOnBoardroom();\n  const isMobile = useIsMobile();\n  const cashStat = useCashPriceInEstimatedTWAP();\n  const treasuryAmount = useTreasuryAmount();\n  const scalingFactor = useMemo(() => cashStat ? Number(cashStat.priceInDAI).toFixed(2) : null, [cashStat]);\n  const {\n    prevAllocation,\n    nextAllocation\n  } = useTreasuryAllocationTimes();\n  const prevEpoch = useMemo(() => nextAllocation.getTime() <= Date.now() ? moment().utc().startOf('day').toDate() : prevAllocation, [prevAllocation, nextAllocation]);\n  const nextEpoch = useMemo(() => moment(prevEpoch).add(1, 'days').toDate(), [prevEpoch]);\n  const boardroomVersion = useBoardroomVersion();\n  const usingOldBoardroom = boardroomVersion !== 'latest';\n  const migrateNotice = useMemo(() => {\n    if (boardroomVersion === 'v2') {\n      return /*#__PURE__*/React.createElement(StyledNoticeWrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Notice, {\n        color: \"green\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        dangerouslySetInnerHTML: t('shuoming'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }, [boardroomVersion]);\n  const isLaunched = Date.now() >= config.boardroomLaunchesAt.getTime();\n\n  if (!isLaunched) {\n    return /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Page, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PageHeader, {\n      icon: /*#__PURE__*/React.createElement(\"img\", {\n        src: join,\n        height: isMobile ? '54' : '109',\n        width: isMobile ? '86' : '173',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }\n      }),\n      title: t('jiaru'),\n      subtitle: t('crgpbhd'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Spacer, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(LaunchCountdown, {\n      deadline: config.boardroomLaunchesAt,\n      description: t('dshrhyz'),\n      descriptionLink: \"https://docs.basis.cash/mechanisms/stabilization-mechanism#expansionary-policy\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, !!account ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    icon: /*#__PURE__*/React.createElement(\"img\", {\n      src: join,\n      height: isMobile ? '54' : '109',\n      width: isMobile ? '86' : '173',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }),\n    title: t('jiaru'),\n    subtitle: t('crgpbhd'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"md\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), migrateNotice, /*#__PURE__*/React.createElement(StyledHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ProgressCountdown, {\n    base: prevEpoch,\n    deadline: nextEpoch,\n    description: t('xygjy'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Stat, {\n    icon: /*#__PURE__*/React.createElement(\"img\", {\n      src: price,\n      height: \"40\",\n      width: \"40\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 23\n      }\n    }),\n    title: cashStat ? `$${cashStat.priceInDAI}` : '-',\n    description: t('gacjg'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Stat, {\n    icon: /*#__PURE__*/React.createElement(\"img\", {\n      src: arrow,\n      height: \"33\",\n      width: \"33\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 23\n      }\n    }),\n    title: scalingFactor ? `x${scalingFactor}` : '-',\n    description: t('sfyz'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Stat, {\n    icon: /*#__PURE__*/React.createElement(\"img\", {\n      src: wallet,\n      height: \"35\",\n      width: \"37\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 23\n      }\n    }),\n    title: treasuryAmount ? `~$${Humanize.compactInteger(getBalance(treasuryAmount), 2)}` : '-',\n    description: t('kfje'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(StyledBoardroom, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StyledCardsWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(StyledCardWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Harvest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Spacer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(StyledCardWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Stake, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }), !usingOldBoardroom &&\n  /*#__PURE__*/\n  // for old boardroom users, the button is displayed in Stake component\n  React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: stakedBalance.eq(0),\n    onClick: onRedeem,\n    text: t('jsbtq'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Spacer, {\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 19\n    }\n  })))) : /*#__PURE__*/React.createElement(UnlockWallet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  })));\n};\n\nconst UnlockWallet = () => {\n  const {\n    connect\n  } = useWallet();\n  const {\n    t\n  } = useTranslation();\n  return /*#__PURE__*/React.createElement(Center, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => connect('injected'),\n    text: t('jsqb'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst StyledBoardroom = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\nconst StyledHeader = styled.div`\n  justify-content: center;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: ${props => props.theme.spacing[5]}px;\n  width: 960px;\n\n  > * {\n    flex: 1;\n    height: 84px;\n    margin: 0 ${props => props.theme.spacing[2]}px;\n    @media (max-width: 768px) {\n      margin: 10px 0;\n    }\n  }\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    width: 80%;\n  }\n`;\nconst StyledNoticeWrapper = styled.div`\n  width: 768px;\n  margin-top: -20px;\n  margin-bottom: 40px;\n`;\nconst StyledCardsWrapper = styled.div`\n  display: flex;\n  width: 600px;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n`;\nconst StyledCardWrapper = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  }\n`;\nconst Center = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n`;\nexport default Boardroom;","map":{"version":3,"sources":["/Users/miczero/ParaAsset/src/views/Boardroom/Boardroom.tsx"],"names":["React","useMemo","styled","useTranslation","useWallet","useIsMobile","Button","PageHeader","Spacer","Harvest","Stake","Switch","Page","useRedeemOnBoardroom","useStakedBalanceOnBoardroom","join","price","arrow","wallet","config","LaunchCountdown","Stat","ProgressCountdown","useCashPriceInEstimatedTWAP","useTreasuryAmount","Humanize","getBalance","useTreasuryAllocationTimes","Notice","useBoardroomVersion","moment","Boardroom","t","account","onRedeem","stakedBalance","isMobile","cashStat","treasuryAmount","scalingFactor","Number","priceInDAI","toFixed","prevAllocation","nextAllocation","prevEpoch","getTime","Date","now","utc","startOf","toDate","nextEpoch","add","boardroomVersion","usingOldBoardroom","migrateNotice","isLaunched","boardroomLaunchesAt","compactInteger","eq","UnlockWallet","connect","StyledBoardroom","div","StyledHeader","props","theme","spacing","StyledNoticeWrapper","StyledCardsWrapper","StyledCardWrapper","Center"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useTranslation } from 'react-i18next';\nimport { useWallet } from 'use-wallet';\nimport useIsMobile from '../../hooks/useIsMobile';\nimport Button from '../../components/Button';\nimport PageHeader from '../../components/PageHeader';\nimport Spacer from '../../components/Spacer';\nimport Harvest from './components/Harvest';\nimport Stake from './components/Stake';\nimport { Switch } from 'react-router-dom';\nimport Page from '../../components/Page';\nimport useRedeemOnBoardroom from '../../hooks/useRedeemOnBoardroom';\nimport useStakedBalanceOnBoardroom from '../../hooks/useStakedBalanceOnBoardroom';\nimport join from '../../assets/img/join.png';\nimport price from '../../assets/img/price.png';\nimport arrow from '../../assets/img/arrow.png';\nimport wallet from '../../assets/img/wallet.png';\nimport config from '../../config';\nimport LaunchCountdown from '../../components/LaunchCountdown';\nimport Stat from './components/Stat';\nimport ProgressCountdown from './components/ProgressCountdown';\nimport useCashPriceInEstimatedTWAP from '../../hooks/useCashPriceInEstimatedTWAP';\nimport useTreasuryAmount from '../../hooks/useTreasuryAmount';\nimport Humanize from 'humanize-plus';\nimport { getBalance } from '../../utils/formatBalance';\nimport useTreasuryAllocationTimes from '../../hooks/useTreasuryAllocationTimes';\nimport Notice from '../../components/Notice';\nimport useBoardroomVersion from '../../hooks/useBoardroomVersion';\nimport moment from 'moment';\n\nconst Boardroom: React.FC = () => {\n  // useEffect(() => window.scrollTo(0, 0));\n  const { t } = useTranslation();\n  const { account } = useWallet();\n  const { onRedeem } = useRedeemOnBoardroom();\n  const stakedBalance = useStakedBalanceOnBoardroom();\n  const isMobile = useIsMobile();\n  const cashStat = useCashPriceInEstimatedTWAP();\n  const treasuryAmount = useTreasuryAmount();\n  const scalingFactor = useMemo(\n    () => (cashStat ? Number(cashStat.priceInDAI).toFixed(2) : null),\n    [cashStat],\n  );\n  const { prevAllocation, nextAllocation } = useTreasuryAllocationTimes();\n\n  const prevEpoch = useMemo(\n    () =>\n      nextAllocation.getTime() <= Date.now()\n        ? moment().utc().startOf('day').toDate()\n        : prevAllocation,\n    [prevAllocation, nextAllocation],\n  );\n  const nextEpoch = useMemo(() => moment(prevEpoch).add(1, 'days').toDate(), [prevEpoch]);\n\n  const boardroomVersion = useBoardroomVersion();\n  const usingOldBoardroom = boardroomVersion !== 'latest';\n  const migrateNotice = useMemo(() => {\n    if (boardroomVersion === 'v2') {\n      return (\n        <StyledNoticeWrapper>\n          <Notice color=\"green\">\n            <div dangerouslySetInnerHTML={t('shuoming')}></div>\n          </Notice>\n        </StyledNoticeWrapper>\n      );\n    }\n    return <></>;\n  }, [boardroomVersion]);\n\n  const isLaunched = Date.now() >= config.boardroomLaunchesAt.getTime();\n  if (!isLaunched) {\n    return (\n      <Switch>\n        <Page>\n          <PageHeader\n            icon={\n              <img\n                src={join}\n                height={isMobile ? '54' : '109'}\n                width={isMobile ? '86' : '173'}\n              />\n            }\n            title={t('jiaru')}\n            subtitle={t('crgpbhd')}\n          />\n          <Spacer size=\"md\" />\n          <LaunchCountdown\n            deadline={config.boardroomLaunchesAt}\n            description={t('dshrhyz')}\n            descriptionLink=\"https://docs.basis.cash/mechanisms/stabilization-mechanism#expansionary-policy\"\n          />\n        </Page>\n      </Switch>\n    );\n  }\n\n  return (\n    <Switch>\n      <Page>\n        {!!account ? (\n          <>\n            <PageHeader\n              icon={\n                <img\n                  src={join}\n                  height={isMobile ? '54' : '109'}\n                  width={isMobile ? '86' : '173'}\n                />\n              }\n              title={t('jiaru')}\n              subtitle={t('crgpbhd')}\n            />\n            <Spacer size=\"md\" />\n            {migrateNotice}\n            <StyledHeader>\n              <ProgressCountdown\n                base={prevEpoch}\n                deadline={nextEpoch}\n                description={t('xygjy')}\n              />\n\n              <Stat\n                icon={<img src={price} height=\"40\" width=\"40\" />}\n                title={cashStat ? `$${cashStat.priceInDAI}` : '-'}\n                description={t('gacjg')}\n              />\n              <Stat\n                icon={<img src={arrow} height=\"33\" width=\"33\" />}\n                title={scalingFactor ? `x${scalingFactor}` : '-'}\n                description={t('sfyz')}\n              />\n              <Stat\n                icon={<img src={wallet} height=\"35\" width=\"37\" />}\n                title={\n                  treasuryAmount\n                    ? `~$${Humanize.compactInteger(getBalance(treasuryAmount), 2)}`\n                    : '-'\n                }\n                description={t('kfje')}\n              />\n            </StyledHeader>\n            <StyledBoardroom>\n              <StyledCardsWrapper>\n                <StyledCardWrapper>\n                  <Harvest />\n                </StyledCardWrapper>\n                <Spacer />\n                <StyledCardWrapper>\n                  <Stake />\n                </StyledCardWrapper>\n              </StyledCardsWrapper>\n              <Spacer size=\"lg\" />\n              {!usingOldBoardroom && (\n                // for old boardroom users, the button is displayed in Stake component\n                <>\n                  <div>\n                    <Button\n                      disabled={stakedBalance.eq(0)}\n                      onClick={onRedeem}\n                      text={t('jsbtq')}\n                    />\n                  </div>\n                  <Spacer size=\"lg\" />\n                </>\n              )}\n            </StyledBoardroom>\n          </>\n        ) : (\n          <UnlockWallet />\n        )}\n      </Page>\n    </Switch>\n  );\n};\n\nconst UnlockWallet = () => {\n  const { connect } = useWallet();\n  const { t } = useTranslation();\n  return (\n    <Center>\n      <Button onClick={() => connect('injected')} text={t('jsqb')} />\n    </Center>\n  );\n};\n\nconst StyledBoardroom = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst StyledHeader = styled.div`\n  justify-content: center;\n  display: flex;\n  flex-direction: row;\n  margin-bottom: ${(props) => props.theme.spacing[5]}px;\n  width: 960px;\n\n  > * {\n    flex: 1;\n    height: 84px;\n    margin: 0 ${(props) => props.theme.spacing[2]}px;\n    @media (max-width: 768px) {\n      margin: 10px 0;\n    }\n  }\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    width: 80%;\n  }\n`;\n\nconst StyledNoticeWrapper = styled.div`\n  width: 768px;\n  margin-top: -20px;\n  margin-bottom: 40px;\n`;\n\nconst StyledCardsWrapper = styled.div`\n  display: flex;\n  width: 600px;\n  @media (max-width: 768px) {\n    width: 100%;\n    flex-flow: column nowrap;\n    align-items: center;\n  }\n`;\n\nconst StyledCardWrapper = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  @media (max-width: 768px) {\n    width: 80%;\n  }\n`;\n\nconst Center = styled.div`\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport default Boardroom;\n"]},"metadata":{},"sourceType":"module"}