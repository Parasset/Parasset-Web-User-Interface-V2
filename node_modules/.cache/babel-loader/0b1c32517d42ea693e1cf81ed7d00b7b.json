{"ast":null,"code":"import { useCallback, useEffect, useState } from 'react';\nimport useBasisCash from './useBasisCash';\nimport config from '../config';\n\nconst useCashPriceInEstimatedTWAP = () => {\n  const [stat, setStat] = useState();\n  const basisCash = useBasisCash();\n  const fetchCashPrice = useCallback(async () => {\n    setStat((await basisCash.getCashStatInEstimatedTWAP()));\n  }, [basisCash]);\n  useEffect(() => {\n    if (basisCash) {\n      fetchCashPrice().catch(err => console.error(`Failed to fetch GAB price: ${err.stack}`));\n      const refreshInterval = setInterval(fetchCashPrice, config.refreshInterval);\n      return () => clearInterval(refreshInterval);\n    }\n  }, [setStat, basisCash]);\n  return stat;\n};\n\nexport default useCashPriceInEstimatedTWAP;","map":{"version":3,"sources":["/Users/miczero/ParaAsset/src/hooks/useCashPriceInEstimatedTWAP.ts"],"names":["useCallback","useEffect","useState","useBasisCash","config","useCashPriceInEstimatedTWAP","stat","setStat","basisCash","fetchCashPrice","getCashStatInEstimatedTWAP","catch","err","console","error","stack","refreshInterval","setInterval","clearInterval"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,OAAOC,MAAP,MAAmB,WAAnB;;AAEA,MAAMC,2BAA2B,GAAG,MAAM;AACxC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,EAAhC;AACA,QAAMM,SAAS,GAAGL,YAAY,EAA9B;AAEA,QAAMM,cAAc,GAAGT,WAAW,CAAC,YAAY;AAC7CO,IAAAA,OAAO,EAAC,MAAMC,SAAS,CAACE,0BAAV,EAAP,EAAP;AACD,GAFiC,EAE/B,CAACF,SAAD,CAF+B,CAAlC;AAIAP,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIO,SAAJ,EAAe;AACbC,MAAAA,cAAc,GAAGE,KAAjB,CAAwBC,GAAD,IAASC,OAAO,CAACC,KAAR,CAAe,8BAA6BF,GAAG,CAACG,KAAM,EAAtD,CAAhC;AACA,YAAMC,eAAe,GAAGC,WAAW,CAACR,cAAD,EAAiBL,MAAM,CAACY,eAAxB,CAAnC;AACA,aAAO,MAAME,aAAa,CAACF,eAAD,CAA1B;AACD;AACF,GANQ,EAMN,CAACT,OAAD,EAAUC,SAAV,CANM,CAAT;AAQA,SAAOF,IAAP;AACD,CAjBD;;AAmBA,eAAeD,2BAAf","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport useBasisCash from './useBasisCash';\nimport { TokenStat } from '../basis-cash/types';\nimport config from '../config';\n\nconst useCashPriceInEstimatedTWAP = () => {\n  const [stat, setStat] = useState<TokenStat>();\n  const basisCash = useBasisCash();\n\n  const fetchCashPrice = useCallback(async () => {\n    setStat(await basisCash.getCashStatInEstimatedTWAP());\n  }, [basisCash]);\n\n  useEffect(() => {\n    if (basisCash) {\n      fetchCashPrice().catch((err) => console.error(`Failed to fetch GAB price: ${err.stack}`));\n      const refreshInterval = setInterval(fetchCashPrice, config.refreshInterval);\n      return () => clearInterval(refreshInterval);\n    }\n  }, [setStat, basisCash]);\n\n  return stat;\n};\n\nexport default useCashPriceInEstimatedTWAP;\n"]},"metadata":{},"sourceType":"module"}